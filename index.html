<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <title>Barker</title>
  <body>
    <button class="refresh">Refresh Tweets</button>
    <ul id ="tweets"></ul>
    <script>
      $(document).ready(function(){
        var $tweetBody = $('#tweets');
        //$body.html('');

        streams.lastRead = 0;
        var updateTweets = function() {
          var index = streams.lastRead;
          streams.lastRead = streams.home.length;
          while(index < streams.home.length){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');

            if (tweet !== undefined) {
              $tweet.text('[' +  tweet.created_at + '] @' + tweet.user + ': ' + tweet.message);
              $tweet.prependTo($tweetBody);
              index += 1;
            }
          }
          //setTimeout(updateTweets, 5000);
        }
        updateTweets();
        $('.refresh').on('click', function() {
          updateTweets();
        });

      });
    </script>
  </body>
</html>
